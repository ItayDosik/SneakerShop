@model SneakerShop.ViewModels.EditUserVM

@{
    ViewBag.Title = "Edit User";
}


<div class="container">
    <h1>Edit User</h1>

    <form asp-action="saveUserEdit" method="post" class="mt-3">
        <input type="hidden" asp-for="id" />

        <div class="form-group row">
            <label asp-for="editUserName" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input required asp-for="editUserName" class="form-control">
                <span asp-validation-for="editUserName" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="editName" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input required asp-for="editName" class="form-control">
            </div>
        </div>

        <div class="form-group row">
            <label asp-for="editEmail" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input required asp-for="editEmail" class="form-control">
                <span asp-validation-for="editEmail" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group row">
            <label asp-for="editPhoneNumber" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input required asp-for="editPhoneNumber" class="form-control">
                <span asp-validation-for="editPhoneNumber" class="text-danger"></span>
            </div>
        </div>
        <br /><br />
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Role</label>
            <div class="col-sm-10">
                <div class="btn-group" role="group" aria-label="Role">
                    <button type="button" class="btn btn-secondary" onclick="selectRole('Admin')" id="adminBtn">Admin</button>
                    <button type="button" class="btn btn-secondary" onclick="selectRole('Member')" id="memberBtn">Member</button>
                    <input type="hidden" id="editRole" name="editRole" value="@Model.editRole"> 
                </div>
            </div>
        </div>

        <div class="form-group row">
            <div class="col-sm-10">
                <button type="submit" class="btn btn-primary">Update</button>
                <a asp-action="removeUser" class="btn btn-primary">Cancel</a>
            </div>
        </div>
    </form>

        <script>
            window.onload = function () {
                var currentRole = document.getElementById('editRole').value;
                if (currentRole === 'Admin') {
                    document.getElementById('adminBtn').classList.add('active');
                } else if (currentRole === 'Member') {
                    document.getElementById('memberBtn').classList.add('active');
                }
            };

            function selectRole(role) {
                document.getElementById('editRole').value = role;

                var buttons = document.querySelectorAll('.btn-group .btn');
                buttons.forEach(function (btn) {
                    btn.classList.remove('active');
                });

                event.target.classList.add('active');
            }
        </script>
